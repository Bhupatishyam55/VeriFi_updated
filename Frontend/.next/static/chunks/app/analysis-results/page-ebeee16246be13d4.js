(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{46959:function(e,t,n){Promise.resolve().then(n.bind(n,23020))},61649:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},51817:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},40257:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(44227)},44227:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:l}catch(e){n=l}}();var c=[],o=!1,u=-1;function d(){o&&a&&(o=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!o){var e=i(d);o=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,o=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===l||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||o||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},l=!0;try{t[e](s,s.exports,a),l=!1}finally{l&&delete n[e]}return s.exports}a.ab="//";var r=a(229);e.exports=r}()},23020:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},dynamic:function(){return f}});var a=n(57437),r=n(2265),s=n(99376),l=n(51817),i=n(32660),c=n(15630),o=n(37356),u=n(98605),d=n(71397),h=n(71837);let f="force-dynamic";function m(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"h-[calc(100vh-8rem)] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-navy-300",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{children:"Loading analysis..."})]})}),children:(0,a.jsx)(p,{})})}function p(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)().get("taskId"),[n,f]=(0,r.useState)(null),[m,p]=(0,r.useState)(!!t),[x,v]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=!0;return async function(){if(!t){p(!1),v("Missing taskId. Please start a new scan.");return}p(!0),v(null);try{let n=await (0,h.gc)(t);e&&f(n)}catch(t){e&&v("Failed to load analysis. Please retry from uploads.")}finally{e&&p(!1)}}(),()=>{e=!1}},[t]),m)?(0,a.jsx)("div",{className:"h-[calc(100vh-8rem)] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 text-navy-300",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{children:"Processing your document..."})]})}):x||!n?(0,a.jsxs)("div",{className:"h-[calc(100vh-8rem)] flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)("p",{className:"text-lg text-navy-300",children:x||"Result not found."}),(0,a.jsx)("button",{onClick:()=>e.push("/upload"),className:"btn-primary",children:"Go to Uploads"})]}):(0,a.jsxs)("div",{className:"h-[calc(100vh-8rem)] flex flex-col animate-fade-in",children:[(0,a.jsx)(u.O,{items:[{label:"Dashboard",href:"/"},{label:"Upload",href:"/upload"},{label:"Analysis Results"}],className:"mb-4"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"p-2 text-navy-400 hover:text-white hover:bg-navy-800 rounded-lg transition-colors","aria-label":"Go back",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-display font-bold text-white",children:"Analysis Results"}),(0,a.jsx)("p",{className:"text-sm text-navy-400",children:"Document validation and fraud detection report"})]})]}),n&&(0,a.jsx)(d.j,{data:n,filename:"analysis-".concat(n.file_id),variant:"ghost"})]}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[(0,a.jsx)("div",{className:"min-h-0",children:(0,a.jsx)(c.Z,{filename:n.filename})}),(0,a.jsx)("div",{className:"min-h-0 glass-card p-6",children:(0,a.jsx)(o.r,{result:n,onApprove:()=>e.push("/"),onReject:()=>e.push("/")})})]})]})}},98605:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var a=n(57437),r=n(2265),s=n(27648),l=n(99376),i=n(14938),c=n(10407),o=n(93448);function u(e){let{items:t,className:n}=e,u=(0,l.usePathname)(),d=t||(()=>{let e=u.split("/").filter(Boolean),t=[{label:"Dashboard",href:"/"}];return e.forEach((n,a)=>{let r="/"+e.slice(0,a+1).join("/"),s=n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:s,href:r})}),t})();return(0,a.jsxs)("nav",{"aria-label":"Breadcrumb",className:(0,o.cn)("flex items-center gap-2 text-sm",n),children:[(0,a.jsx)(s.default,{href:"/",className:"flex items-center gap-1 text-navy-400 hover:text-gold-400 transition-colors","aria-label":"Home",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})}),d.map((e,t)=>{let n=t===d.length-1;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-navy-600","aria-hidden":"true"}),n?(0,a.jsx)("span",{className:"text-white font-medium","aria-current":"page",children:e.label}):(0,a.jsx)(s.default,{href:e.href||"#",className:"text-navy-400 hover:text-gold-400 transition-colors",children:e.label})]},t)})]})}},71397:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var a=n(57437),r=n(2265),s=n(51817),l=n(92735),i=n(61649),c=n(48736),o=n(93448);function u(e){let{data:t,filename:n="export",className:u,variant:d="default"}=e,[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),x=(0,r.useRef)(null),v=(0,r.useRef)(null),y=()=>null!=t||(alert("No data available to export."),!1);(0,r.useEffect)(()=>{function e(e){x.current&&v.current&&!x.current.contains(e.target)&&!v.current.contains(e.target)&&p(!1)}return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]);let j=e=>{y()&&(p(!1),e())},g=()=>{if(!y())return;f(!0);let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="".concat(n,".json"),r.click(),URL.revokeObjectURL(a),f(!1)},b=()=>{if(y()){f(!0);try{let e="";if(Array.isArray(t)){if(t.length>0){let n=Object.keys(t[0]);e+=n.join(",")+"\n",t.forEach(t=>{e+=n.map(e=>{let n=t[e];return"string"==typeof n&&(n.includes(",")||n.includes('"'))?'"'.concat(n.replace(/"/g,'""'),'"'):null!=n?n:""}).join(",")+"\n"})}}else"object"==typeof t&&(e="Key,Value\n",Object.entries(t).forEach(t=>{let[n,a]=t;e+="".concat(n,",").concat(a,"\n")}));let a=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="".concat(n,".csv"),s.click(),URL.revokeObjectURL(r)}catch(e){console.error("CSV export failed:",e)}f(!1)}},w=async()=>{if(!y())return;f(!0);let e=window.open("","_blank");e&&(e.document.write("\n        <html>\n          <head>\n            <title>".concat(n,"</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 20px; }\n              table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n              th { background-color: #0f172a; color: white; }\n            </style>\n          </head>\n          <body>\n            <h1>").concat(n,"</h1>\n            <pre>").concat(JSON.stringify(t,null,2),"</pre>\n          </body>\n        </html>\n      ")),e.document.close(),e.print()),f(!1)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{ref:v,onClick:()=>!h&&p(!m),className:(0,o.cn)("flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300","default"===d?"btn-primary":"btn-ghost",h&&"opacity-50 cursor-not-allowed",u),disabled:h,"aria-label":"Export options","aria-expanded":m,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Exporting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export"})]})}),m&&!h&&(0,a.jsxs)("div",{ref:x,className:"absolute right-0 top-full mt-2 w-48 glass-card border border-navy-700 rounded-xl shadow-2xl overflow-hidden z-50 animate-fade-in",children:[(0,a.jsxs)("button",{onClick:()=>j(b),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-navy-300 hover:bg-navy-800/50 hover:text-white transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Export as CSV"})]}),(0,a.jsxs)("button",{onClick:()=>j(g),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-navy-300 hover:bg-navy-800/50 hover:text-white transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Export as JSON"})]}),(0,a.jsxs)("button",{onClick:()=>j(w),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-navy-300 hover:bg-navy-800/50 hover:text-white transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Export as PDF"})]})]})]})}},71837:function(e,t,n){"use strict";n.d(t,{TH:function(){return r},gc:function(){return s}});let a=n(40257).env.NEXT_PUBLIC_API_BASE||"http://localhost:8000/api/v1";async function r(){var e,t,n,r,s;let l=await fetch("".concat(a,"/dashboard/stats"));if(!l.ok)throw Error("Failed to load dashboard stats");let i=await l.json(),c=i.summary||{};return{total_scanned:null!==(e=c.total_scanned)&&void 0!==e?e:0,fraud_detected:null!==(t=c.fraud_detected)&&void 0!==t?t:0,total_savings:(null!==(n=c.savings_in_crores)&&void 0!==n?n:0)*1e7,pending_review:12,accuracy_rate:99.7,weekly_activity:null!==(r=i.weekly_activity)&&void 0!==r?r:[],recent_scans:null!==(s=i.recent_scans)&&void 0!==s?s:[]}}async function s(e){let t=await fetch("".concat(a,"/scan/result/").concat(e));if(!t.ok)throw Error("Failed to fetch scan result");return t.json()}}},function(e){e.O(0,[615,380,222,971,117,744],function(){return e(e.s=46959)}),_N_E=e.O()}]);